\section{Limits and Continuity}
\label{sect:limits-and-cont}
\begin{enumerate}
\item In MATH2241, we have learnt the concept of \emph{limits and continuity}
in \(\R\). Here, we would extend the notion to a more general \emph{metric
space}. As we will see, some definitions and terminologies are analogous to the
ones we learnt in MATH2241.
\end{enumerate}
\subsection{Convergence in a Metric Space}
\label{subsect:conv-ms}
\begin{enumerate}
\item Throughout \Cref{subsect:conv-ms}, we shall consider an arbitrary metric
space \((X,d)\).
\item A sequence \(\{x_n\}\) in \(X\) \defn{converges} to \(a\in X\) if for any
\(\varepsilon>0\), there exists \(N\in\N\) such that for any positive integer
\(n\ge N\),
\[
d(x_n,a)<\varepsilon,
\]
i.e., \(x_n\in B(a,\varepsilon)\).  In this case, we write \(\displaystyle
\lim_{n\to \infty}x_n=a\), \(\{x_n\}\to a\), or \(\{x_n\}_{n=1}^{\infty}\to
a\). We call \(a\) as \defn{limit} of \(\{x_n\}\). If the sequence \(\{x_n\}\)
converges to \emph{some} \(a\in X\), we say that the sequence is
\defn{convergent}. Otherwise, it is called \defn{divergent}.

\begin{note}
The definition of a \defn{sequence} is analogous to the one in MATH2241: It is
a function from \(\N\) to \(X\).
\end{note}

\item \label{it:ms-conv-relate-real-conv} We can relate the notion of
convergence in metric space with that in \(\R\) as follows:
\[\{x_n\}\to a\iff \{d(x_n,a)\}\to 0.\]
\begin{pf}
Note that
\begin{align*}
&\hspace{1cm}\{x_n\}\to a\\
&\iff \text{for any \(\varepsilon>0\), there exists \(N\in\N\) such that \(|d(x_n,a)-0|=d(x_n,a)<\varepsilon\) for any \(n\ge N\)}\\
&\iff \{d(x_n,a)\}\to 0.
\end{align*}
\end{pf}
\item Like the case for \(\R\), the limit here is unique also (if exists). This
property can be proved using the same approach as the one in MATH2241
(essentially just replacing some symbols).
\begin{proposition}
\label{prp:limit-uniqueness}
A sequence \(\{x_n\}\) in \(X\) can converge to at most one point in \(X\).
\end{proposition}
\begin{pf}
Assume that \(\{x_n\}\to a\) and \(\{x_n\}\to b\) for some \(a,b\in X\).  Fix
any \(\varepsilon>0\). Then there exist \(N_1,N_2\in \N\) such that
\[
d(x_n,a)<\frac{\varepsilon}{2}\quad\text{for any \(n\ge N_1\)},
\]
and
\[
d(x_n,a)<\frac{\varepsilon}{2}\quad\text{for any \(n\ge N_2\)}.
\]
Then, choose \(N=\max\{N_1,N_2\}\). By triangle inequality (M3), for any \(n\ge
N\),
\[
d(a,b)\le d(x_n,a)+d(x_n,b)<\frac{\varepsilon}{2}+\frac{\varepsilon}{2}=\varepsilon.
\]
\end{pf}
\item The following result gives some properties of a convergent sequence.
\begin{proposition}
\label{prp:conv-seq-prop}
Suppose that \(\{x_n\}\to a\) in \(X\). Then,
\begin{enumerate}
\item \(\{x_n:n\in\N\}\) is bounded in \(X\).
\item \(a\) is an adherent point of \(\{x_n:n\in\N\}\).
\item If \(\{x_n:n\in\N\}\) is an infinite set, then \(a\) is an accumulation
point of \(\{x_n:n\in\N\}\).
\end{enumerate}
\end{proposition}
\begin{pf}
\begin{enumerate}
\item When \(\{x_n\}\to a\), there exists \(N\in\N\) such that \(d(x_n,a)<1\)
for any \(n\ge N\). Then, by setting
\(M=\max\{d(x_1,a),\dotsc,d(x_{N-1},a),1\}\), we have \(d(x_n,a)<M\) for any
\(n\in\N\). Applying triangle inequality (M3), we can then show that
\(\{x_n:n\in\N\}\) is bounded in \(X\).

\item Fix any \(r>0\). By assumption there exists \(N\in\N\) such that \(x_n\in
B(a,r)\) for any \(n\ge N\). Thus, \(B(a,r)\cap\{x_n:n\in\N\}\ne\varnothing\),
so \(a\) is an adherent point of \(\{x_n:n\in\N\}\).

\item Fix any \(r>0\). By assumption there exists \(N\in\N\) such that \(x_n\in
B(a,r)\) for any \(n\ge N\). Since \(\{x_n:n\in\N\}\) is infinite, the
intersection \(B(a,r)\cap\{x_n:n\in\N\}\supseteq \{x_n:n\ge N\}\) is also
infinite. Hence, by \Cref{prp:acc-pt-inf-set}, \(a\) is an accumulation point
of \(\{x_n:n\in\N\}\).
\end{enumerate}
\end{pf}
\item Using the concept of \emph{sequences}, we can obtain an useful
characterization of adherent points and accumulation points as follows:
\begin{proposition}
\label{prp:adher-accum-seq-equiv}
Let \(S\subseteq X\) and \(a\in X\). Then,
\begin{enumerate}
\item \(a\in\overline{S}\) iff there is a sequence \(\{x_n\}\) in \(S\) such
that \(\{x_n\}\to a\).
\item \(a\in S'\) iff there is an infinite sequence \(\{x_n\}\) of distinct
points in \(S\) such that \(\{x_n\}\to a\).
\end{enumerate}
\end{proposition}
\begin{pf}
\begin{enumerate}
\item ``\(\Rightarrow\)'': Suppose that \(a\in \overline{S}\). Then for any
\(n\in\N\), there exists \(x_n\in S\) such that \(\displaystyle
0\le d(x_n,a)<\frac{1}{n}\). We can see that the sequence \(\{x_n\}\) constructed in
this way converges to \(a\), since \(\{d(x_n,a)\}\to 0\) by sandwich theorem.

``\(\Leftarrow\)'': Assume that there is a sequence \(\{x_n\}\) in \(S\)
converging to \(a\). By \Cref{prp:conv-seq-prop}, we know that \(a\) is an
adherent point of \(\{x_n:n\in\N\}\), i.e., \(a\in\overline{\{x_n:n\in\N\}}\).
Since the sequence \(\{x_n\}\) is in \(S\), we have \(\{x_n:n\in\N\}\subseteq
S\). It then follows by \labelcref{it:clos-pre-subset} that
\[a\in\overline{\{x_n:n\in\N\}}\subseteq \overline{S}.\]

\item ``\(\Rightarrow\)'': Suppose that \(a\in S'\). Note first that for any
\(n\in\N\), by \Cref{prp:acc-pt-inf-set}, \(B(a,1/n)\cap S\) is an infinite
set. Thus, it is possible to choose \(x_n\in S\setminus
\{x_1,\dotsc,x_{n-1}\}\) with \(\displaystyle 0\le d(x_n,a)<\frac{1}{n}\) for
every \(n\in\N\). This constructs an infinite sequence \(\{x_n\}\) of distinct
points in \(S\) with \(\{x_n\}\to a\).

``\(\Leftarrow\)'': Assume there is an \emph{infinite} sequence \(\{x_n\}\) of
distinct points in \(S\) such that \(\{x_n\}\to a\). By
\Cref{prp:conv-seq-prop}, we know that \(a\in\{x_n:n\in\N\}'\). Since
\(\{x_n:n\in\N\}\subseteq S\), it follows by \labelcref{it:deriv-pre-subset}
that
\[
a\in\{x_n:n\in\N\}'\subseteq S'.
\]
\end{enumerate}
\end{pf}
\item With this sequential characterization, we can get yet another criterion
for closedness.

\begin{proposition}
\label{prp:closed-seq-crit}
Let \(S\subseteq X\). Then, the following are equivalent.
\begin{enumerate}
\item \(S\) is closed in \(X\).
\item If \(\{x_n\}\) is a sequence in \(S\) with \(\{x_n\}\to a\), then \(a\in
S\).
\end{enumerate}
\end{proposition}
\begin{pf}
\underline{\(\text{(a)}\implies \text{(b)}\)}: Suppose that \(S\) is closed in \(X\) and
\(\{x_n\}\) is a sequence in \(S\) with \(\{x_n\}\to a\). Then by
\Cref{prp:adher-accum-seq-equiv} and \Cref{prp:equiv-crit-closed}, we have
\(a\in \overline{S}=S\).

\underline{\(\text{(b)}\implies \text{(a)}\)}: Assume that (b) holds. Fix any
\(a\in\overline{S}\). By \Cref{prp:adher-accum-seq-equiv}, there is a sequence
\(\{x_n\}\) in \(S\) such that \(\{x_n\}\to a\). Applying (b) then gives \(a\in
S\). This shows \(\overline{S}\subseteq S\). Since we must have \(S\subseteq
\overline{S}\), it follows that \(\overline{S}=S\), hence \(S\) is closed in
\(X\) by \Cref{prp:equiv-crit-closed}.
\end{pf}
\item Next, we will discuss a result about \emph{subsequences}, which is
a generalization to the respective result in MATH2241. It can be proved using
the same approach as the one in MATH2241.
\begin{proposition}
\label{prp:subseq-same-lim}
Let \(\{x_n\}\) be a sequence in \(X\). Then \(\{x_n\}\to a\) iff
\(\{x_{n_k}\}_{k=1}^{\infty}\to a\) for every subsequence \(\{x_{n_k}\}\) of
\(\{x_n\}\).
\end{proposition}
\begin{note}
The concept of \emph{subsequence} is defined in the same manner as the one for
MATH2241: We first let \(n_1<n_2<n_3<\dotsb\) be positive integers sorted in
strictly increasing order, and then the sequence \(\{x_{n_k}\}_{k=1}^{\infty}\)
is a \defn{subsequence} of \(\{x_n\}\).
\end{note}

\begin{pf}
``\(\Leftarrow\)'' is immediate since \(\{x_n\}\) is a subsequence of itself.
So it remains to prove ``\(\Rightarrow\)''. Assume that \(\{x_n\}\to a\). For
any \(\varepsilon>0\), there exists \(N\in\N\) such that
\(d(x_n,a)<\varepsilon\) for any \(n\ge N\). Fix any subsequence
\(\{x_{n_k}\}\) of \(\{x_n\}\). Then for any \(k\ge N\), since \(n_k\ge k\ge
N\), we have \(d(x_{n_k},a)<\varepsilon\).
\end{pf}
\end{enumerate}
\subsection{Complete Metric Spaces}
\label{subsect:complete-ms}
\begin{enumerate}
\item Throughout \Cref{subsect:complete-ms}, we shall consider an arbitrary
metric space \((X,d)\).

\item To motivate the notion of \emph{complete metric spaces}. We consider the
set \(\Q\) of rational numbers. It is well-known that
\(\sqrt{2}\in\R\setminus\Q\) is \emph{irrational}. Nonetheless, using decimal
representation, we can obtain better and better \emph{approximations} to
\(\sqrt{2}\), using just rational numbers.

More specifically, we can express \(\sqrt{2}\) as
\(\fpeval{sqrt(2)}\cdots\). From this we can construct a sequence \(\{x_n\}\)
in \(\Q\) as follows:
\[
x_1=\fpeval{round(sqrt(2),0)},\quad
x_2=\fpeval{round(sqrt(2),1)},\quad
x_3=\fpeval{round(sqrt(2),2)},\quad
x_4=\fpeval{round(sqrt(2),3)},\quad
x_5=\fpeval{round(sqrt(2),4)},\quad
x_6=\fpeval{round(sqrt(2),5)},\quad
x_7=\fpeval{round(sqrt(2),6)},\quad\cdots
\]
by rounding \(\sqrt{2}\) in increasing number of decimal places. We can show
that \(\{x_n\}\to\sqrt{2}\notin\Q\). So, this sequence \(\{x_n\}\) does
\emph{not} converge to any number in \(\Q\).

However, it is not hard to observe that the terms in this sequence get ``closer
and closer'' together, so intuitively it seems that the sequence should
converge to a certain ``point''. Here that ``point'' is \(\sqrt{2}\), which is
\emph{not} contained in \(\Q\). So in this sense, \(\Q\) appears to have
something ``missing'' at \(\sqrt{2}\) and it is not so ``complete''.

\item This kind of sequence with terms getting ``closer and closer'' together
can be characterized by \emph{Cauchy sequence}. \begin{note} We have studied
this concept in the special case of \(\R\) in MATH2241. Here we consider a more
general one. \end{note}

A sequence \(\{x_n\}\) in \(X\) is said to be a \defn{Cauchy sequence} if for
any \(\varepsilon>0\), there exists \(N\in\N\) such that
\(d(x_n,x_m)<\varepsilon\) for any \(n,m\ge N\).

\item As a \emph{convergent} sequence also has the feature that the terms get
``closer and closer'' together, intuitively it seems that it should also be a
Cauchy sequence. This is indeed the case.

\begin{proposition}
\label{prp:conv-imp-cauchy}
Every convergent sequence is Cauchy.
\end{proposition}
\begin{pf}
Consider any convergent sequence \(\{x_n\}\to a\) in \(X\). Then for any
\(\varepsilon>0\), there exists \(N\in\N\) such that
\[
d(x_n,a)<\frac{\varepsilon}{2}\quad\text{for any \(n\ge N\)}.
\]
Thus, for any \(n,m\ge N\), by triangle inequality (M3),
\[
d(x_n,x_m)\le d(x_n,a)+d(x_m,a)<\varepsilon\quad\text{for any \(n,m\ge N\)}.
\]
Thus, \(\{x_n\}\) is Cauchy.
\end{pf}

\item Intuitively, a Cauchy sequence ``stabilizes'' as the index gets larger.
Hence, naturally we would expect that the \emph{distances} between terms
respectively taken from two Cauchy sequences ``stabilize'' also. This intuitive
idea is proven below.

\begin{proposition}
\label{prp:dist-cauchy-conv}
Let \(\{x_n\}\) and \(\{y_n\}\) be two Cauchy sequences. Then, the sequence
\(\{d(x_n,y_n)\}\) converges in \(\R\).
\end{proposition}
\begin{pf}
Since the sequence \(\{d(x_n,y_n)\}\) is in \(\R\), it suffices to prove that
the sequence \(\{d(x_n,y_n)\}\) is Cauchy.

Fix any \(\varepsilon>0\). Since \(\{x_n\}\) and \(\{y_n\}\) are Cauchy, there
exist \(N_1,N_2\in\N\) such that
\begin{align*}
d(x_n,x_m)&<\frac{\varepsilon}{2}\quad\text{for any \(n,m\ge N_1\)}\\
d(y_n,y_m)&<\frac{\varepsilon}{2}\quad\text{for any \(n,m\ge N_2\)}.
\end{align*}
We then choose \(N=\max\{N_1,N_2\}\). Then, for any \(n,m\ge N\), we have
\begin{align*}
|d(x_n,y_n)-d(x_m,y_m)|
&= |d(x_n,y_n)\vc{-d(x_n,y_m)+d(x_n,y_m)}-d(x_m,y_m)|\\
&\le |d(x_n,y_n)\vc{-d(x_n,y_m)}|+|\vc{d(x_n,y_m)}-d(x_m,y_m)|&\text{(triangle inequality)}\\
&\le |d(y_n,y_m)|+|d(x_n,x_m)|&\text{(M3)}\\
&\le d(y_n,y_m)+d(x_n,x_m)\\
&<\frac{\varepsilon}{2}+\frac{\varepsilon}{2}\\
&=\varepsilon.
\end{align*}
This shows that \(\{d(x_n,y_n)\}\) is Cauchy, as desired.
\end{pf}

\item In our previous \(\sqrt{2}\) example, the rational sequence there can be
shown to be Cauchy but not convergent. So a Cauchy sequence is not necessarily
convergent. Indeed, the convergence of Cauchy sequence allows us to
characterize the notion of ``completeness''. Intuitively, divergence of a
Cauchy sequence indicates a ``missing point''. To be ``complete'', there should
be no ``missing point'', thus every Cauchy sequence should be convergent.

A metric space \((X,d)\) is said to be \defn{complete} if \emph{every} Cauchy
sequence in \(X\) converges in \(X\). A subset \(S\) of \(X\) is said to be
\defn{complete} if, when considered as a metric space itself, \((S,d)\) is
complete.

\item Next, we shall establish an important result that the Euclidean space
\(\R^k\) is complete for any \(k\in\N\).

\begin{theorem}
\label{thm:rk-complete}
The metric space \(\R^k\) is complete for any \(k\in\N\).
\end{theorem}
\begin{pf}
We shall base our proof on the fact that \(\R\) is complete. Consider any
Cauchy sequence \(\{(x_n^{(1)},\dotsc,x_n^{(k)})\}\) in \(\R^k\). Note that for
every \(i=1,\dotsc,k\), \(\{x_n^{(i)}\}\) is a Cauchy sequence in \(\R\). Then
by the completeness of \(\R\), we must have \(\{x_n^{(i)}\}\to a^{(i)}\) for
some \(a^{(i)}\in\R\). This then implies that
\[
\{(x_n^{(1)},\dotsc,x_n^{(k)})\}\to (a^{(1)},\dotsc,a^{(k)})\in\R^k.
\]
\end{pf}

\item The next result connects \emph{compactness} with \emph{completeness}. It
turns out that compactness, being a rather strong condition, does implies
completeness.

\begin{theorem}
\label{thm:cpt-subset-comp}
Every compact subset \(S\) of a metric space \(X\) is complete.
\end{theorem}
\begin{pf}
Let \(\{x_n\}\) be any Cauchy sequence in \(S\).

\underline{Case 1}: \(\{x_n:n\in\N\}\) is a finite set.

Then there exists \(N\in\N\) such that \(x_n=x\in S\) for any \(n\ge N\). This
shows \(\lim_{n\to \infty}x_n=x\in S\).
\begin{note}
For this case, we do even need compactness!
\end{note}

\underline{Case 2}: \(\{x_n:n\in\N\}\) is an infinite set.

By \Cref{thm:cpt-bw-prop}, \(X\) has the Boltzano-Weierstrass property. Hence,
as an infinite subset of \(X\), the set \(\{x_n:n\in\N\}\) has an accumulation
point \(a\) in \(\{x_n:n\in\N\}\). Fix any \(\varepsilon>0\). First, since
\(\{x_n\}\) is Cauchy, there exists \(N\in\N\) such that
\(d(x_n,x_m)<\varepsilon/2\) for any \(n,m\ge N\). Also, since \(a\) is an
accumulation point of \(\{x_n:n\in\N\}\), the intersection
\(B(a,\varepsilon/2)\cap\{x_n:n\in\N\}\) is infinite. Thus, there exists \(m\ge
N\) such that \(x_m\in B(a,\varepsilon/2)\).

Now, applying triangle inequality, we have
\[
d(x_n,a)\le d(x_n,x_m)+d(x_m,a)<\frac{\varepsilon}{2}+\frac{\varepsilon}{2}=\varepsilon
\]
for any \(n\ge N\). This shows \(\{x_n\}\to a\), as desired.
\end{pf}

\subsubsection*{Construction of Completion (Optional)}
\item Given a metric space \((X,d)\) which may not be complete, we can
construct the \emph{completion} of \((X,d)\), denoted by
\((\widetilde{X},\widetilde{d})\). The \defn{completion} of \((X,d)\) is the
smallest complete metric space containing \(X\), i.e., for any complete metric
space \((Y,d_Y)\) with \(Y\supseteq X\), the set \(\widetilde{X}\) is a subset
of \(Y\) (with possibly some ``embedding''). \begin{note}
The metric \(d_Y\) is the same as \(d\) except that its domain is changed to
\(Y\times Y\).
\end{note}

Example: The completion of \(\Q\) equipped with standard Euclidean metric is
\(\R\) with the same metric.

\item Here we will demonstrate how to actually construct such completion.
As suggested previously, every Cauchy sequence in \(X\) may be seen as
corresponding to a ``point'', to which the terms are ``getting closer''. The
intuitive idea is then to include all the Cauchy sequences in \(X\) in the
completion, so that all the possible corresponding ``points'' are included ---
There is not ``missing point''!

\item However, it is not hard to notice that doing in this way would result in
many redundancies. It appears that many Cauchy sequences actually correspond to
the same ``point''. For example, both the Cauchy sequences \(\{0.9, 0.99,
0.999, 0.9999, \dotsc\}\) and \(\{1.1, 1.01, 1.001, 1.0001, \dotsc\}\) appear
to correspond to the same ``point'': \(1\). But we want the completion to be
``smallest'', so all those redundancies should be removed.

\item This leads us to consider the idea of \emph{equivalence classes}, to
``represent'' each ``point'' by using only one element, namely the
\emph{equivalence class} containing all the ``equivalent'' Cauchy sequences
corresponding to the same ``point''.

Hence, we would like to define an equivalence relation \(\sim\) on the set of
all Cauchy sequences in \(X\) to capture our intuitive idea of ``corresponding
to the same point''.

\item To define such equivalence relation, we first introduce the following
function. For any two Cauchy sequences \(\{x_n\}\) and \(\{y_n\}\) in \(X\),
define the function
\(\widetilde{\delta}:X\times X\to\R\) by
\[\widetilde{\delta}(\{x_n\},\{y_n\})=\lim_{n\to \infty}d(x_n,y_n).\]
Note that the limit \(\lim_{n\to \infty}d(x_n,y_n)\) always exists by
\Cref{prp:dist-cauchy-conv}, so the function \(\widetilde{\delta}\) is well-defined.

\item Next, we define \(\{x_n\}\) and \(\{y_n\}\) as \emph{equivalent}, written
as \(\{x_n\}\sim\{y_n\}\), if \(\widetilde{\delta}(\{x_n\},\{y_n\})=0\).

\begin{intuition} When the distance between two Cauchy sequences are zero, the
terms in each Cauchy sequence should ``get closer'' to the same ``point''.
\end{intuition}


\item We now let
\[
\widetilde{X}=\{\text{all equivalence classes of Cauchy sequences in \(X\)}\}.
\]
Note that \(\widetilde{\delta}(\{x_n\},\{y_n\})\) is invariant after replacing
either of the sequences by a Cauchy sequence equivalent to it.

\begin{pf}
WLOG, we only prove that
\(\widetilde{\delta}(\{x_n\},\{y_n\})=\widetilde{\delta}(\{x_n\},\{z_n\})\), where
\(\{z_n\}\) be any Cauchy sequence equivalent to \(\{y_n\}\), i.e.,
\(\{z_n\}\sim\{y_n\}\).

Using (M3) of the underlying metric \(d\), we have
\[
\widetilde{\delta}(\{x_n\},\{y_n\})\le
\widetilde{\delta}(\{x_n\},\{z_n\})+\underbrace{\widetilde{\delta}(\{z_n\},\{y_n\})}_{0}
=\widetilde{\delta}(\{x_n\},\{z_n\}).
\]
On the other hand, using (M3) of the metric \(d\) again, we get
\[
\widetilde{\delta}(\{x_n\},\{z_n\})\le
\widetilde{\delta}(\{x_n\},\{y_n\})+\underbrace{\widetilde{\delta}(\{y_n\},\{z_n\})}_{0}
=\widetilde{\delta}(\{x_n\},\{y_n\}).
\]
This shows that
\(\widetilde{\delta}(\{x_n\},\{y_n\})=\widetilde{\delta}(\{x_n\},\{z_n\})\).
\end{pf}

With this property, the following function \(\widetilde{d}:\widetilde{X}\times
\widetilde{X}\to\R\) is well-defined:
\[
\widetilde{d}([s_1],[s_2])=\widetilde{\delta}(s_1,s_2)
\]
where \(s_1=\{x_n\}\) and \(s_2=\{y_n\}\) are any elements taken from the equivalence classes
\([s_1]\) and \([s_2]\) in \(\widetilde{X}\) respectively.


\item We can then verify that \(\widetilde{d}\) is indeed a metric as follows.

\begin{pf}
(M1): Due to the nonnegativity of the underlying metric \(d\), we must have
\(d([s_1],[s_2])=\widetilde{\delta}(s_1,s_2)\ge 0\). Next, observe that
\(\widetilde{\delta}(s_1,s_2)=0\) iff \(s_1=s_2\), due to the underlying metric
\(d\). Since equivalence classes are either equal or disjoint, it follows that
\(d([s_1],[s_2])=0\) iff \([s_1]=[s_2]\).

(M2): It follows from (M2) of the underlying metric \(d\):
\(d(x_n,y_n)=d(y_n,x_n)\) for any \(n\in\N\).

(M3): It follows from (M3) of the underlying metric \(d\).
\end{pf}

\item Now we define an \emph{embedding} \(\iota:X\to\widetilde{X}\) by
\(\iota(x)=[\{x,x,x,\dotsc\}]\), i.e., the equivalence class containing the
sequence \(\{x_n\}\) with \(x_n=x\) for any \(n\in\N\).

The embedding \(\iota\) is an \emph{isometry} or \emph{distance-preserving
map}, i.e., \(d(x,y)=\widetilde{d}(\iota(x),\iota(y))\) for any \(x,y\in X\).
Then, by identifying every \(x\in X\) with the corresponding embedding
\(\iota(x)\in\widetilde{X}\) (``treating them as the same''), we may say that
\(X\) is a ``subset'' of \(\widetilde{X}\) (with embedding).

\item Next, we will show that \((\widetilde{X},\widetilde{d})\) is indeed a
\emph{complete} metric space. We want to show that every Cauchy sequence of
equivalence classes in \(\widetilde{X}\) converges to a certain equivalence class in
\(\widetilde{X}\).

Fix any Cauchy sequence \(\{[s_n]\}_{n=1}^{\infty}\) of equivalence classes in
\(\widetilde{X}\), where \(s_n\) is a Cauchy sequence
\(\{x_m^{(n)}\}_{m=1}^{\infty}\) in \(X\) for any \(n\in\N\).

To prove the convergence of \(\{[s_n]\}_{n=1}^{\infty}\), we will use a special
kind of diagonal argument.  First fix any \(k\in\N\). Since
\(s_k=\{x_m^{(k)}\}_{m=1}^{\infty}\) is Cauchy in \(X\), there exists
\(N_k\in\N\) such that
\[
d\qty(x_{m_1}^{(k)},x_{m_2}^{(k)})<\frac{1}{k}
\]
for any \(m_1,m_2\ge N_k\). We denote the \(N_k\)th term in the sequence
\(s_k\), namely \(x_{N_k}^{(k)}\), by \(y_k\). Then particularly we would have
\begin{equation}
\label{eq:completion-dxky}
d\qty(x_{m_1}^{(k)},y_k)=d\qty(x_{m_1}^{(k)},x_{N_k}^{(k)})<\frac{1}{k}
\end{equation}
for any \(m_1\ge N_k\).

We claim that the sequence \(\{[s_n]\}\) converges to the equivalence class
containing the sequence
\(\{y_k\}_{k=1}^{\infty}=\{x_{N_k}^{(k)}\}_{k=1}^{\infty}\), which is in \(\widetilde{X}\).

\begin{pf}
Firstly, we shall prove that \(\{y_k\}_{k=1}^{\infty}\) is a Cauchy sequence in
\(X\), which shows that the equivalence class containing
\(\{y_k\}_{k=1}^{\infty}\) is indeed in \(\widetilde{X}\).  Fix any
\(\varepsilon>0\). Then, we choose a sufficiently large \(N\in\N\) such that:
\begin{enumerate}
\item \(1/N<\varepsilon/3\), and
\item Considering any \(m,n\ge N\), there should exist a sufficiently large
\(j\in\N\) such that \(d(x_j^{(n)},x_j^{(m)})<\varepsilon/3\) since
\(\{[s_i]\}_{i=1}^{\infty}\) is Cauchy, which implies that
\(\widetilde{\delta}(\{x_j^{(n)}\},\{x_j^{(m)}\})=\lim_{j\to
\infty}d(x_j^{(n)},x_j^{(m)})\) can be arbitrarily small, as long as \(m,n\)
are large enough.
\end{enumerate}
Then, for any \(m,n\ge N\) with a sufficiently large \(j\in\N\), that exceeds
both \(N_m\) and \(N_n\), and makes \(d(x_j^{(n)},x_j^{(m)})<\varepsilon/3\),
we have
\[
d(y_n,y_m)=d(x_{N_n}^{(n)},x_{N_m}^{(m)})
\le
d(x_{N_n}^{(n)},x_j^{(n)})+d(x_j^{(n)},x_j^{(m)})+d(x_j^{(m)},x_{N_m}^{(m)})
<\frac{1}{n}+\frac{\varepsilon}{3}+\frac{1}{m}
\le\frac{\varepsilon}{3}+\frac{\varepsilon}{3}+\frac{\varepsilon}{3}
=\varepsilon,
\]
establishing the Cauchyness of \(\{y_k\}_{k=1}^{\infty}\) in \(X\).

Next, we want to show that \(\{[s_n]\}\to [\{y_k\}_{k=1}^{\infty}]\). In other
words, we need to show that for any \(\varepsilon>0\), there exists \(N\in\N\)
such that
\[
\widetilde{d}([s_n],[\{y_k\}_{k=1}^{\infty}])
=\widetilde{\delta}(s_n,\{y_k\}_{k=1}^{\infty})
=\widetilde{\delta}(\{x_k^{(n)}\}_{k=1}^{\infty},\{y_k\}_{k=1}^{\infty})
=\lim_{k\to \infty}d(x_k^{(n)},y_k)
=\lim_{k\to \infty}d(x_k^{(n)},x_{N_k}^{(k)})
<\varepsilon
\]
for any \(n\ge N\).

We first fix any \(\varepsilon>0\), and then choose a sufficiently large
\(N\in\N\) such that (i) \(1/N<\varepsilon/2\) and (ii) for any \(m,n\ge N\),
we have \(d(y_n,y_m)=d(x_{N_n}^{(n)},x_{N_m}^{(m)})<\varepsilon/2\). Then, for any
\(n\ge N\), we have

\begin{align*}
\widetilde{d}([s_n],[\{y_k\}_{k=1}^{\infty}])
&=\lim_{k\to \infty}d(x_k^{(n)},x_{N_k}^{(k)})\\
&\le\lim_{k\to \infty}d(x_k^{(n)},x_{N_n}^{(n)})+\lim_{k\to \infty}d(x_{N_n}^{(n)},x_{N_k}^{(k)}) \\
&<\frac{1}{n}+\frac{\varepsilon}{2}&\text{(using \labelcref{eq:completion-dxky} for the first term; (ii) for the second term)} \\
&\le\frac{1}{N}+\frac{\varepsilon}{2} \\
&<\frac{\varepsilon}{2}+\frac{\varepsilon}{2} \\
&=\varepsilon,
\end{align*}
completing the proof.
\end{pf}
\item Finally, we shall show that \((\widetilde{X},\widetilde{d})\) is the
\emph{smallest} complete metric space containing \(X\). Consider another
complete metric space \((Y,d_Y)\) containing \(X\) also, where
\(d_Y\) is the same as \(d\) except that the domain
becomes \(Y\times Y\).

Note that for every class \([s]\in\widetilde{X}\), the Cauchy sequence \(s\) in
\(X\) is also a Cauchy sequence in \(Y\), thus converges to some \(y\in Y\) by
the completeness of \(Y\). From this, define a function \(\rho:\widetilde{X}\to
Y\) by \(\rho([s])=y\).

We claim that the function \(\rho\) is an isometry, and so the set
\(\widetilde{X}\) can be regarded as a subset of \(Y\) with ``embedding''.

\begin{pf}
Consider any two classes \([s_1],[s_2]\in\widetilde{X}\). Suppose the
corresponding Cauchy sequences \(s_1\) and \(s_2\) converge to \(y_1\) and
\(y_2\) (both in \(Y\)) respectively.

Since the definitions of \(d_Y\) and \(d\) coincide on \(X\times  X\), we may
extend the definition of \(\widetilde{\delta}\) through replacing the
underlying metric \(d\) by \(d_Y\), and changing its domain to \(Y\times Y\).
Correspondingly, the domain of metric \(\widetilde{d}\) can be extended to
\(\widetilde{Y}\times\widetilde{Y}\) where \(\widetilde{Y}\) is the set of all
equivalence classes of Cauchy sequences in \(Y\).

Now, to show that \[\widetilde{d}([s_1],[s_2])=d_Y(\rho([s_1]),\rho([s_2]))
=d_Y(y_1,y_2),\] we first pick the Cauchy sequences \(\{y_1,y_1,\dotsc\}\in
[s_1]\) and \(\{y_2,y_2,\dotsc\}\in [s_2]\).\footnote{We have
\(\widetilde{\delta}(\{y_1,y_1,\dotsc\},s_1)=0\) since \(s_1\to y_1\); similar
for another sequence.} Then, we have
\[
\widetilde{d}([s_1],[s_2])=\widetilde{\delta}(\{y_1,y_1,\dotsc\},\{y_2,y_2,\dotsc\})
=d_Y(y_1,y_2),
\]
as desired.
\end{pf}
\end{enumerate}
\subsection{Continuous Functions}
\label{subsect:cts-fun}
\begin{enumerate}
\item As we have mentioned at the very beginning, in MATH3401 we are studying
continuous functions between metric spaces. We have analyzed metric spaces in
\Cref{sect:metric-spaces}. It is now time to study \emph{continuous functions},
another central concept in MATH3401.

\item The concept of continuous functions is utilized for studying the
``equivalence problem'' in metric space topology, namely determining whether
two metric spaces are ``equivalent'' in some sense. More specifically, we would
like to investigate whether two metric spaces have ``similar shape''. We will
introduce a notion called \emph{homeomorphism}, which is related to the
``equivalence'' of metric spaces. Simply speaking, homeomorphism is a bijective
continuous function whose inverse is also continuous.

Throughout \Cref{subsect:cts-fun}, we shall use the notations \((X,d_{X})\) and
\((Y,d_Y)\) to denote arbitrary metric spaces. Let us first generalize the
\(\varepsilon\)-\(\delta\) definition of \emph{limit of function} studied in
MATH2241 to the context of metric spaces.

\item Let \(S\) be a subset of \(X\), and \(f:S\to Y\) be a function. Suppose
that \(p\in X\) is an accumulation point of \(S\). Then, we write
\(\displaystyle \lim_{x\to p}f(x)=b\) or \(f(x)\to b\) as \(x\to p\) if for any
\(\varepsilon>0\), there exists \(\delta>0\) such that
\[
d_Y(f(x),b)<\varepsilon
\]
for any \(x\in S\setminus\{p\}\) with \(d_X(x,p)<\delta\), or in other words,
\[
f(x)\in B_Y(b,\varepsilon)
\]
for any \(x\in B_X(p,\delta)\cap S\setminus \{p\}\), or more compactly:
\[
f\big((B_X(p,\delta)\cap S\setminus \{p\})\big)\subseteq B_Y(b,\varepsilon).
\]
\begin{note}
We require \(p\in X\) to be an accumulation point of \(S\) to ensure that
\(B_X(p,\delta)\cap S\setminus \{p\}\) is nonempty for any \(\delta>0\)
\faIcon{arrow-right} excluding ``boring'' cases.
\end{note}

\item \label{it:ms-lim-fun-relate-real-lim-fun} We can relate the notion of
limit of function between metric spaces with that for real functions
(studied in MATH2241) as follows.

\[
\lim_{x\to p}f(x)=b\iff \lim_{x\to p}d_Y(f(x),b)=0
\]
\begin{pf}
Note that
\begin{align*}
&\hspace{1cm}\lim_{x\to p}f(x)=b\\
&\iff \text{for any \(\varepsilon>0\), there exists \(\delta>0\) such that \(|d_Y(f(x),b)-0|=d_Y(f(x),b)<\varepsilon
\)}\\
&\hspace{1.5cm}\text{for any \(x\in B_X(p,\delta)\cap S\setminus\{p\}\)}\\
&\iff \lim_{x\to p}d_Y(f(x),b)=0.
\end{align*}
\end{pf}

\item Like MATH2241, we have the following sequential criterion for limits of
functions.
\begin{proposition}
\label{prp:lim-seq-crit}
Let \(p\in X\) be an accumulation point of \(S\subseteq X\), \(b\in Y\), and
\(f:S\to Y\) be any function. Then, \(\displaystyle \lim_{x\to p}f(x)=b\) iff
\(\displaystyle \lim_{n\to \infty}f(x_n)=b\) for every sequence \(\{x_n\}\) in
\(S\setminus\{p\}\) which converges to \(p\).
\end{proposition}
\begin{pf}
``\(\Rightarrow\)'': Assume that \(\displaystyle \lim_{x\to p}f(x)=b\). This
means for any \(\varepsilon>0\), there exists \(\delta>0\) such that
\(d_Y(f(x),b)<\varepsilon\) for any \(x\in B_X(p,\delta)\cap S\setminus\{p\}\).

Next, consider any sequence \(\{x_n\}\) in \(S\setminus \{p\}\) which converges
to \(p\). For the positive \(\delta>0\), by convergence there exists \(N\in\N\)
such that for any \(n\ge N\), we have \(d_X(x_n,p)<\delta\), which implies that
\[
x_n\in B_X(p,\delta)\cap S\setminus \{p\},
\]
thus \(d_Y(f(x_n),b)<\varepsilon\). This proves \(\lim_{n\to \infty}f(x_n)=b\).

``\(\Leftarrow\)'': We prove by contrapositive. Assume that \(\lim_{x\to
p}f(x)\ne b\). Then there exists \(\varepsilon_0>0\) such that for any \(n\ge
N\), there exists \(x_n\in B(p,1/n)\cap S\setminus \{p\}\) with
\(d(f(x_n),b)\ge \varepsilon_0\).

By construction we have \(0<d(x_n,p)<1/n\) for any \(n\in\N\). Hence, by
sandwich theorem, we have \(\{d(x_n,p)\}\to 0\), which means that \(\{x_n\}\to
p\).  On the other hand, we have \(d(f(x_n),b)\ge \varepsilon_0\) for any
\(n\in\N\), for some \(\varepsilon_0>0\). This suggests that \(\lim_{n\to
\infty}f(x_n)\ne b\).
\end{pf}

\item Next, we will consider a result applicable when the codomain is \(\R^n\),
related to the Euclidean norm \(\|\cdot\|\).
\begin{proposition}
\label{prp:lim-norm}
Let \(S\) be a subset of \(X\), \(p\in X\) be an accumulation point of \(S\),
and \(f:S\to\R^n\) be any function. Then,
\[
\lim_{x\to p}f(x)=b\implies \lim_{x\to p}\|f(x)\|=\|b\|,
\]
where \(\|y\|=d_E(y,\vect{0})\) for any \(y\in\R^n\) (\(\vect{0}\) is
the zero vector in \(\R^n\) and \(d_E\) is the Euclidean metric).
\end{proposition}
\begin{pf}
Assume that \(\lim_{x\to p}f(x)=b\). Then, \(\lim_{x\to
p}d(f(x),b)=\lim_{x\to p}\|f(x)-b\|=0\). By reverse triangle inequality, we
have
\[
0\le \big|\|f(x)\|-\|b\|\big|\le \|f(x)-b\|.
\]
Hence, using sandwich theorem, we get
\[
\lim_{x\to p}\big|\|f(x)\|-\|b\|\big|=0,
\]
implying that \(\lim_{x\to p}\|f(x)\|=\|b\|\).
\end{pf}
\item Now, we discuss the concept of continuity. Like the limit of function,
the definition here is also generalized from the one in MATH2241. Let \(S\) be
a subset of \(X\). A function \(f:S\to Y\) is \defn{continuous} at \(p\in S\)
if for any \(\varepsilon>0\), there exists \(\delta>0\) such that
\[d_Y(f(x),f(p))<\varepsilon\]
for any
\(x\in S\) with \(d_X(x,p)<\delta\), or more compactly,
\(f(B_X(p,\delta)\cap S)\subseteq B_Y(f(p),\varepsilon)\).
The function \(f\) is said to be \defn{continuous on \(S\)} if it is continuous
at every \(p\in S\). Sometimes we simply call \(f\) as \defn{continuous} when
\(f\) is continuous on its domain.

\item  Every point \(p\in S\) must be an adherent
point of \(S\), thus can be classified into (i) accumulation point of \(S\) and
(ii) isolated point of \(S\). We have the following results about continuity
for (i) and (ii) respectively.
\begin{enumerate}
\item \label{it:cts-isolate} If \(p\in S\) is an isolated point of \(S\), then \(f\) must be
continuous at \(p\).

\begin{pf}
Assume that \(p\in S\) is an isolated point of \(S\). Then there exists
\(\delta_0>0\) such that \(B_X(p,\delta_0)\cap S=\{p\}\). Now, for any
\(\varepsilon>0\), choose \(\delta=\delta_0\), and then we have
\[
d_Y(f(x),f(p))=d_Y(f(p),f(p))=0<\varepsilon
\]
for any \(x\in B_X(p,\delta)\cap S=\{p\}\).
\end{pf}
\item \label{it:cts-acc} If \(p\in S\) is an accumulation point of \(S\), then \(f\) is continuous
at \(p\) iff \(\lim_{x\to p}f(x)=f(p)\).

\begin{pf}
Assume that \(p\in S\) is an accumulation point of \(S\).

``\(\Rightarrow\)'': For any \(\varepsilon>0\), the continuity of \(f\)
suggests that there exists \(\delta>0\) such that \(f(B_X(p,\delta)\cap S)\subseteq
B_Y(f(p),\varepsilon)\), which implies \(f(B_X(p,\delta)\cap S\setminus \{p\})\subseteq
B_Y(f(p),\varepsilon)\), thus \(\lim_{x\to p}f(x)=f(p)\).

``\(\Leftarrow\)'': For any \(\varepsilon>0\), \(\lim_{x\to p}f(x)=f(p)\)
suggests that there exists \(\delta>0\) such that \(f(B_X(p,\delta)\cap S\setminus
\{p\})\subseteq B_Y(f(p),\varepsilon)\). Note that \(f(p)\) always belongs to
\(B_Y(f(p),\varepsilon)\). Thus, we can conclude that
\[
f(B_X(p,\delta))\subseteq B_Y(f(p),\varepsilon),
\]
meaning that \(f\) is continuous at \(p\).
\end{pf}
\end{enumerate}
\item Without specifying whether \(p\in S\) is an isolated point or
accumulation point of \(S\), we can have the following criterion for
continuity based on limit of sequence.

\begin{proposition}
\label{prp:cts-seq-lim-crit}
Let \(S\) be a subset of \(X\).  A function \(f:S\to Y\) is continuous at
\(p\in S\) iff \(\lim_{n\to \infty}f(x_n)=f(p)\) whenever \(\{x_n\}\) is a
sequence in \(S\) converging to \(p\).
\end{proposition}
\begin{pf}
\underline{Case 1}: \(p\in X\) is an isolated point of \(X\).

In this case, \(f\) is always continuous at \(p\). On the other hand, consider
any sequence \(\{x_n\}\) in \(S\) with \(\{x_n\}\to p\). Since \(p\) is an
isolated point of \(X\), there exists \(N\in\N\) such that, for any \(n\ge N\),
\(x_n=p\) (which implies that \(f(x_n)=f(p)\)). Thus, \(\lim_{n\to
\infty}f(x_n)=f(p)\).

\underline{Case 2}: \(p\in X\) is an accumulation point of \(X\).

Note that
\begin{align*}
&\text{\(f\) is continuous at \(p\)}\\
&\iff \lim_{x\to p}f(x)=f(p)&\text{(\labelcref{it:cts-acc})}\\
&\iff \lim_{n\to \infty}f(x_n)=f(p)\text{ for any sequence \(\{x_n\}\) in
\(S\setminus \{p\}\) converging to \(p\)}&\text{(\Cref{prp:lim-seq-crit})}\\
&\iff \lim_{n\to \infty}f(x_n)=f(p)\text{ for any sequence \(\{x_n\}\) in
\(S\) converging to \(p\)}.
\end{align*}
To prove the last equivalence, consider:
\begin{itemize}
\item ``\(\Leftarrow\)'': Immediate.
\item ``\(\Rightarrow\)'': Assume that \(\lim_{n\to \infty}f(x_n)=f(p)\) for
any sequence \(\{x_n\}\) in \(S\setminus \{p\}\) converging to \(p\).

Now, consider any sequence \(\{x_n\}\) in \(S\) converging to \(p\). If it only
contains finitely many terms different from \(p\), then it is immediate that
\(\lim_{n\to \infty}f(x_n)=f(p)\). So henceforth we suppose that it has
infinitely many terms different from \(p\).

For any \(\varepsilon>0\), there exists \(N\in \N\) such that
\[
d_X(x_n,p)<\varepsilon
\]
for any \(n\ge N\). After excluding all terms equal to \(p\) from the sequence
\(\{x_n\}\), we can get another sequence \(\{y_n\}\) in \(S\setminus \{p\}\).
Note that \(\{y_n\}\) also converges to \(p\) since it is just a subsequence of
\(\{x_n\}\). By assumption, we then have
\[
\lim_{n\to \infty}f(y_n)=f(p).
\]
Now, we add the excluded terms that are equal to \(p\) back to the sequence
\(\{y_n\}\) to reassemble \(\{x_n\}\). Observe that we still have
\[
\lim_{n\to \infty}f(x_n)=f(p),
\]
by considering the definition.
\end{itemize}
\end{pf}
\item Next we consider composition of continuous functions. Here we generalize
the corresponding result in MATH2241 to make it applicable for general metric
spaces.

\begin{proposition}
\label{prp:compo-cts}
If \(f:X\to Y\) is continuous at \(p\in X\) and \(g:Y\to Z\) is continuous at
\(f(p)\in Y\), then the composition \(g\circ f:X\to Z\) is continuous at \(p\).
\end{proposition}
\begin{pf}
Fix any \(\varepsilon>0\). Due to the continuity of \(g\), there exists
\(\delta_1>0\) such that
\[
y\in \vc{B_Y(f(p),\delta_1)}\implies g(y)\in B_Z(g\circ f(p),\varepsilon).
\]
Using this \(\delta_1\) to serve as the role of ``\(\varepsilon\)'', due to the
continuity of \(f\), there exists \(\delta>0\) such that
\[
x\in B_X(p,\delta)\implies f(x)\in \vc{B_Y(f(p),\delta_1)}.
\]
Combining the two implications gives
\[
x\in B_X(p,\delta)\implies g\circ f(x)=g(f(x))\in B_Z(g\circ f(p),\varepsilon),
\]
meaning that \(g\circ f\) is continuous at \(p\).
\end{pf}
\item Some further properties about ``combining'' continuous functions in
different ways are as follows.
\begin{proposition}
\label{prp:cts-prop}
\hfill
\begin{enumerate}
\item If \(f,g:X\to\C\) are continuous at \(p\), then so are \(f+g\), \(f-g\),
\(fg\), and \(f/g\). For \(f/g\), we need to require that \(g(p)\ne 0\).
\item If \(f,g:X\to\C^n\) are continuous at \(p\), then so are \(f+g\),
\(\lambda f\), \(f\cdot g\), and \(\|f\|\), where \(\lambda\in\C\) and
``\(\cdot\)'' denotes (pointwise) dot/inner product.
\item If \(f_i:X\to\C\) is continuous at \(p\) for any \(i=1,\dotsc,n\), then
so is the vector-valued function \(f=(f_1,\dotsc,f_n):X\to\C^n\). The converse
also holds.
\end{enumerate}
\end{proposition}
\begin{pf}
Omitted.
\end{pf}

\begin{remark}
\item Since the identity function from \(\C\) to \(\C\) is continuous, we can obtain
many continuous functions based on \Cref{prp:cts-prop}.
\item We consider the set \(\C\) of complex numbers in this result since it is
a ``large'' set equipped with some natural arithmetic operations (``\(+\)'', ``\(-\)'',
``\(\cdot\)'', ``\(/\)'').
\end{remark}
\end{enumerate}

\subsection{Relationship Between Continuity and Topological Concepts}
\begin{enumerate}
\item Next, we will discuss the relationships between continuity and some
topological concepts discussed in \Cref{sect:metric-spaces}, namely
\emph{openness}, \emph{closedness}, and \emph{compactness}. They give us some
useful criteria and necessary/sufficient conditions for continuity.

\item The first one is about criterion of continuity using the concept of
openness and closedness.

\begin{theorem}
\label{thm:cts-crit-open-closed}
\hfill
\begin{enumerate}
\item A function \(f:X\to Y\) is continuous on \(X\) iff the preimage \(f^{-1}(T)\)
of any open set \(T\subseteq Y\) is open in \(X\).
\item A function \(f:X\to Y\) is continuous on \(X\) iff the preimage \(f^{-1}(T)\)
of any closed set \(T\subseteq Y\) is closed in \(X\).
\end{enumerate}
\end{theorem}
\begin{note}
The two instances of ``open'' (``closed'') carry different meanings. One of
them is ``in \(Y\)'', while another is ``in \(X\)''.
\end{note}

\begin{pf}
\hfill
\begin{enumerate}
\item ``\(\Rightarrow\)'': Assume that \(f\) is continuous on \(X\) and
consider any open set \(T\subseteq Y\). For any \(x_0\in f^{-1}(T)\), we have
\(f(x_0)=y_0\in T\). By the openness of \(T\), there exists \(\varepsilon>0\)
such that \(B(y_0,\varepsilon)\subseteq T\).

Since \(f\) is continuous at \(x_0\), there exists \(\delta>0\) such that
\[
f(B_X(x_0,\delta))\subseteq B_Y(f(y_0),\varepsilon),
\]
which implies that
\[
\vc{B_X(x_0,\delta)}\subseteq f^{-1}(B_Y(y_0,\varepsilon))\vc{\subseteq f^{-1}(T)},
\]
hence \(f^{-1}(T)\) is open in \(X\).

``\(\Leftarrow\)'': Assume that the preimage \(f^{-1}(T)\)
of any open set \(T\subseteq Y\) is open in \(X\). Fix any \(\varepsilon>0\).
Then we want to find \(\delta>0\) such that
\[
f(B_X(p,\delta))\subseteq B_Y(f(p),\varepsilon).
\]
Since the open ball \(B_Y(f(p),\varepsilon)\) is open in \(Y\), by assumption,
the preimage \(f^{-1}(B_Y(f(p),\varepsilon))\) is open in \(X\). Now, since
\(p\) lies in the preimage \(f^{-1}(B_Y(f(p),\varepsilon))\), by openness
there exists \(\delta>0\) such that
\[
B(p,\delta)\subseteq f^{-1}(B_Y(f(p),\varepsilon)),
\]
which implies that
\[
f(B(p,\delta))\subseteq B(f(p),\varepsilon),
\]
as desired.

\item It follows from (a) and the fact that \(f^{-1}(Y\setminus T)=X\setminus
f^{-1}(T)\):
\begin{align*}
&\text{\(f\) is continuous on \(X\)}\\
&\iff \text{\(f^{-1}(S)\) is open in \(X\) for any open \(S\subseteq Y\)}&\text{(a)}\\
&\iff \text{\(f^{-1}(Y\setminus T)\) is open in \(X\) for any closed \(T\subseteq Y\)}\\
&\iff \text{\(X\setminus f^{-1}(T)\) is open in \(X\) for any closed \(T\subseteq Y\)}\\
&\iff \text{\(f^{-1}(T)\) is closed in \(X\) for any closed \(T\subseteq Y\)}.
\end{align*}
\end{enumerate}
\end{pf}

\begin{warning}
The criterion here is about \emph{preimage}, but not \emph{image}. In general,
the image of an open (closed) set under a continuous function may
\underline{not} be open (closed).
\end{warning}

\item A function that maps open sets to open sets is said to be \defn{open}; a
function that maps closed sets to closed sets is said to be \defn{closed}. Open
mappings may not be closed and closed mappings may not be open in general.

\item Counterexamples about open/closed/continuous mappings:
\begin{note}
The metric spaces involved below are all equipped with Euclidean metrics (with
suitable domains).
\end{note}
\begin{enumerate}
\item \emph{Continuous but not open mapping:} the constant zero function
\(f:\R\to\R\) defined by \(f(x)=0\) for any \(x\in\R\).

\begin{pf}
It is clearly continuous but the open set \((0,1)\subseteq\R\) is mapped to
\(\{0\}\) which is \emph{not} open in \(\R\).
\end{pf}

\item \emph{Continuous but not closed mapping:} the identity function
\(f:X=(0,1)\to\R\) defined by \(f(x)=x\) for any \(x\in(0,1)\).

\begin{pf}
It is clearly continuous. But, \((0,1)\) is \emph{closed} in
\(X=(0,1)\), while \(f((0,1))=(0,1)\) is \emph{not closed} in \(\R\).
\end{pf}

\item \emph{Continuous mapping that is \underline{neither} open \underline{nor}
closed:} function \(f:\R\to\R\) defined by \(\displaystyle f(x)=\frac{x^2}{1+x^2}\) for any
\(x\in\R\).

\begin{pf}
It is clearly continuous. Now consider the set \(\R\) which is both open and
closed in \(\R\). However, \(f(\R)=[0,1)\) which is \emph{neither} open
\emph{nor} closed in \(\R\).
\end{pf}

\item \emph{Open but not continuous mapping:} function \(f:\R\to\{0,1\}\) defined by
\[
f(x)=\begin{cases}
0&\text{if \(x\ge 0\)},\\
1&\text{if \(x<0\)}.
\end{cases}
\]
\begin{pf}
It is clearly an open mapping since \(\varnothing\), \(\{0\}\), \(\{1\}\), and
\(\{0,1\}\) are all open in \(\{0,1\}\).  But it is not continuous at \(0\).
\end{pf}

\item \emph{Closed but not continuous mapping:} function \(f:\R\to\{0,1\}\) defined by
\[
f(x)=\begin{cases}
0&\text{if \(x\ge 0\)},\\
1&\text{if \(x<0\)}.
\end{cases}
\]
\begin{pf}
It is clearly a closed mapping since \(\varnothing\), \(\{0\}\), \(\{1\}\), and
\(\{0,1\}\) are all closed in \(\{0,1\}\).  But it is not continuous at \(0\).
\end{pf}

\item \emph{Bijective open but not continuous mapping:} function
\(f:[0,\infty)\to\{-1\}\cup(0,\infty)\) defined by
\[
f(x)=\begin{cases}
-1&\text{if \(x=0\)},\\
x&\text{if \(x>0\)}.
\end{cases}
\]
\begin{pf}
It is clearly bijective. To show that it is an open mapping, consider the
following. Fix any open subset \(S\) of \([0,\infty)\).

\underline{Case 1}: \(0\in S\).

Then, the image \(f(S)=\{-1\}\cup (S\setminus \{0\})\). Note that \(\{-1\}\)
and \(S\setminus \{0\}\) are both open in \(\{-1\}\cup(0,\infty)\), so do their
union.

\underline{Case 2}: \(0\notin S\).

Then the image \(f(S)=S\subseteq (0,\infty)\), and we can see that \(S\) is
open in \(\{-1\}\cup (0,\infty)\).

However, we can clearly see that \(f\) is not continuous at \(0\).
\end{pf}

\item \emph{Open but not closed mapping:} function \(f:X=(0,1)\to\R\)
defined by \(f(x)=x\) for any \(x\in(0,1)\).

\begin{pf}
It is an open mapping since every every set \(S\subseteq (0,1)\) which is open
in \((0,1)\) is also open in \(\R\), by considering the definition. On the
other hand, \((0,1)\) is closed in \((0,1)\) but \(f((0,1))=(0,1)\) is not
closed in \(\R\). Thus it is not a closed mapping.
\end{pf}

\item \emph{Closed but not open mapping:} the constant zero function
\(f:\R\to\R\) defined by \(f(x)=0\) for any \(x\in\R\).

\begin{pf}
It is a closed mapping since \(\varnothing\) and \(\{0\}\) are both closed in
\(\R\). However, the open set \((0,1)\subseteq \R\) is mapped to \(\{0\}\)
which is not open in \(\R\). Thus it is not an open mapping.
\end{pf}
\end{enumerate}

\item The next property of continuous function is that it maps \emph{compact}
sets to \emph{compact} sets.

\begin{theorem}
\label{thm:cts-map-cpt-to-cpt}
Let \(f:X\to Y\) be a continuous function and \(C\subseteq X\) be a compact
set. Then, the image \(f(C)\) is compact in \(Y\).
\end{theorem}
\begin{pf}
Take any open cover \(\{U_{\lambda}:\lambda\in\Lambda\}\) of \(f(C)\):
\[
\bigcup_{\lambda\in\Lambda}U_{\lambda}\supseteq f(C).
\]
This implies that
\[
f^{-1}\qty(\bigcup_{\lambda\in\Lambda}U_{\lambda})=\bigcup_{\lambda\in\Lambda}f^{-1}(U_{\lambda})
\supseteq C.
\]
Due to the continuity of \(f\), \(f^{-1}(U_{\lambda})\) is open in \(X\) for
any \(\lambda\in\Lambda\). Hence, \(\{f^{-1}(U_{\lambda}):\lambda\in\Lambda\}\)
serves as an open cover of \(C\). By the compactness of \(C\), there exists a
finite sub-cover \(\{f^{-1}(U_i):i=1,\dotsc,n\}\) of \(C\):
\[
f^{-1}\qty(\bigcup_{i=1}^{n}U_i)=\bigcup_{i=1}^{n}f^{-1}(U_i)\supseteq C,
\]
which implies that
\[
\bigcup_{i=1}^{n}U_i\supseteq f(C),
\]
so we have found a finite sub-cover of \(f(C)\): \(\{U_i:i=1,\dotsc,n\}\).
\end{pf}

\item Using \Cref{thm:cts-map-cpt-to-cpt}, we can generalize the
\emph{boundedness theorem} in MATH2241 as follows.
\begin{corollary}
\label{cor:cts-cpt-bounded}
If \(f:X\to Y\) is continuous and \(C\subseteq X\) is compact, then \(f\) is
bounded on \(C\), i.e., the image \(f(C)\) is bounded.
\end{corollary}
\begin{pf}
By \Cref{thm:cts-map-cpt-to-cpt}, we know that \(f(C)\) is compact, which
implies that it is bounded by \Cref{thm:compact-imp-closed-bounded}.
\end{pf}

\item Next, we generalize the \emph{extreme value theorem} in MATH2241.

\begin{theorem}
\label{thm:cts-cpt-evt}
If \(f:X\to\R\) is continuous on a compact set \(C\subseteq X\), then \(f\)
attains its maximum and minimum in \(C\), i.e., there exist \(p,q\in C\) such that
\[
f(p)=\max f(C)
\qqtext{and}
f(q)=\min f(C)
\]
\end{theorem}
\begin{pf}
By \Cref{thm:cts-map-cpt-to-cpt}, the image \(f(C)\) is compact in \(\R\).
Thus, it is also closed and bounded in \(\R\) by
\Cref{thm:compact-imp-closed-bounded}. By the completeness axiom of \(\R\), the
supremum \(M=\sup f(C)\) exists in \(\R\). Now fix any \(r>0\). Firstly, since
\(M\) is the supremum of \(f(C)\), there exists \(y\in f(C)\) such that
\(M-r<y\). Next, as \(M\) is an upper bound of \(f(C)\), we have \(y\le
M<M+r\). It follows that \(B(M,r)\cap f(C)=(M-r,M+r)\cap f(C)\supseteq
\{y\}\ne\varnothing\). This means that \(M\) is an adherent point of \(f(C)\).

Hence, we have \(M\in\overline{f(C)}=f(C)\), where the equality holds due to the
closedness of \(f(C)\). This means that \(\max f(C)=M=f(p)\) for some \(p\in
C\).  Similarly, we can show that \(f(q)=\min f(C)\) for some \(q\in C\).

\end{pf}

\item Now we consider the continuity of inverse function. The following result
suggests a sufficient condition for the inverse of a continuous function to be
also continuous.

\begin{theorem}
\label{thm:cts-fn-inv-cts}
Let \(f:X\to Y\) be a function. Suppose that \(X\) is compact, and \(f\) is
both bijective and continuous. Then, the inverse \(f^{-1}:Y\to X\) is also
continuous.
\end{theorem}
\begin{pf}
First of all, due to the bijectivity of \(f\), the inverse \(f^{-1}\) exists.
Now fix any closed set \(C\subseteq X\). By the compactness of \(X\) and
\Cref{cor:closed-subset-of-cpt-is-cpt}, \(C\) is a compact set. Hence, by the
continuity of \(f\) and \Cref{thm:cts-map-cpt-to-cpt}, \(f(C)\) is also
compact, thus closed in \(Y\).

Note that the preimage of \(C\) under \(f^{-1}\) is
\[
(f^{-1})^{-1}(C)=\{y\in Y:f^{-1}(y)\in C\}
=\{y \in Y: f(f^{-1}(y))\in f(C)\}
=\{y\in Y:y\in f(C)\}
=f(C).
\]
So, the preimage \((f^{-1})^{-1}(C)\) is closed in \(Y\). By
\Cref{thm:cts-crit-open-closed}, we conclude that \(f^{-1}\) is continuous.
\end{pf}

\item For \Cref{thm:cts-fn-inv-cts} to hold, it is important that \(X\) is
compact. Without the compactness, we can construct a counterexample as follows.
Let \(X=Y=[0,1]\). Equip \(X\) with the discrete metric and \(Y\) with the
standard Euclidean metric. Note that \(X\) is \emph{not} compact since
\(\mathcal{F}=\{\{x\}: x\in X\}\) is an open cover of \(X\) without any finite
subcover. Here, since the discrete metric is used, \(\{x\}\) is an open set in
\(X\).

Now consider the function \(f:X\to Y\) defined by \(f(x)=x\) for any \(x\in
X\). It is both bijective and continuous. Its inverse is \(f^{-1}:Y\to X\),
defined by \(f^{-1}(y)=y\) for any \(y\in Y\). Note that \(f^{-1}\) is
\emph{not} continuous. To see this, take \(\{0\}\subseteq X\). It is open in
\(X\) under the discrete metric, but the preimage \(f^{-1}(\{0\})=\{0\}\) is
\emph{not} open in \(Y\) under the Euclidean metric.
\end{enumerate}

\subsection{Homeomorphisms}
\begin{enumerate}
\item Now, we introduce an important notion that has already been mentioned at
the beginning of \Cref{subsect:cts-fun}: \emph{homeomorphism}. A bijective
continuous function \(f:X\to Y\) whose inverse \(f^{-1}\) is also continuous is
called a \defn{homeomorphism} or a \defn{topological mapping} of \(X\) onto
\(Y\). Two metric spaces \(X\) and \(Y\) are said to be \defn{homeomorphic},
denoted by \(X\cong Y\), if there is a homeomorphism of \(X\) onto \(Y\).

\begin{note}
\(\cong\) is an equivalence relation. To see this, note that:
\begin{enumerate}
\item The identity function from \(X\) to \(X\) is a homeomorphism.
\item If \(f:X\to Y\) is a homeomorphism, then so is \(f^{-1}:Y\to X\).
\item If \(f:X\to Y\) and \(g:Y\to Z\) are homeomorphisms, then so is the
composition \(g\circ f:X\to Z\).
\end{enumerate}
\end{note}
\item The idea of homeomorphic metric spaces can be intuitively understood as
follows.  Let \(f:X\to Y\) be a continuous function, and imagine that \(X\) and
\(Y\) are elastic geometric objects. Intuitively, the continuous function \(f\)
``moves'' the points in \(X\) such that the points ``close together''
originally are still ``close together'' in \(Y\): there is not ``abrupt
change''. In other words, there can be bending, twisting, stretching, dilating,
contracting, etc. on \(X\), but there cannot be \emph{tearing} on \(X\), since
it can make points originally close together become far apart. In short, \(f\)
``continuously deforms'' the object \(X\) to the object \(Y\). So, two metric
spaces are homeomorphic if one can be ``continuously deformed'' to another, and
back.

\item In the following, we will prove a result that gives several criteria for
homeomorphism. Before proving that, we consider the following lemma.

\begin{lemma}
\label{lma:bij-cts-crit}
Let \(f:X\to Y\) be a bijective function. Then the following are equivalent.
\begin{enumerate}
\item \(f\) is continuous.
\item \(f^{-1}\) is open.
\item \(f^{-1}\) is closed.
\end{enumerate}
\end{lemma}
\begin{pf}
For clarity, here we denote the preimage and image of a set \(S\) under a
function \(g\) by \(g^{\leftarrow}(S)\) and \(g^{\rightarrow}(S)\)
respectively.

Note that the preimage of \(T\) under \(f\) is
\begin{align*}
f^{\leftarrow}(T)&=\{x\in X:\blc{f(x)}\in T\} \\
&=\{x\in X:f^{-1}(\blc{f(x)})\in f^{-1\rightarrow}(T)\} \\
&=\{x\in X:x\in f^{-1\rightarrow}(T)\}\\
&=f^{-1\rightarrow}(T),
\end{align*}
the image of \(T\) under \(f^{-1}\).

Then, by \Cref{thm:cts-crit-open-closed}, we know that:
\begin{itemize}
\item \(f\) is continuous iff \(f^{-1\rightarrow}(T)=f^{\leftarrow}(T)\) is
open in \(X\) for any open set \(T\subseteq Y\), i.e., \(f^{-1}\) is open.
\item \(f\) is continuous iff \(f^{-1\rightarrow}(T)=f^{\leftarrow}(T)\) is
closed in \(X\) for any closed set \(T\subseteq Y\), i.e., \(f^{-1}\) is closed.
\end{itemize}
Hence the result follows.
\end{pf}

\begin{theorem}
\label{thm:hmph-crit}
Let \(f:X\to Y\) be a bijective function. Then the following are equivalent.
\begin{enumerate}
\item \(f\) is a homeomorphism, i.e., \(f\) and \(f^{-1}\) are both continuous.
\item \(f\) is continuous and open.
\item \(f\) is continuous and closed.
\end{enumerate}
\end{theorem}
\begin{pf}
Note that \(f^{-1}\) is bijective. By \Cref{lma:bij-cts-crit}, the following
are equivalent:
\begin{itemize}
\item \(f^{-1}\) is continuous.
\item \(f=(f^{-1})^{-1}\) is open.
\item \(f=(f^{-1})^{-1}\) is closed.
\end{itemize}
Then the result follows.
\end{pf}

\item A property of a set which remains invariant under
homeomorphisms/topological mappings is called a \defn{topological property} or
a \defn{topological invariant}.

Examples of topological properties:
\begin{itemize}
\item \emph{openness/closedness:} By \Cref{thm:hmph-crit}, a homeomorphism is a
mapping that is both open and closed, thus preserving both openness and
closedness.
\item \emph{compactness:} By \Cref{thm:cts-map-cpt-to-cpt}, compactness is
preserved by continuous function, hence also by homeomorphism.
\end{itemize}
Non-example of topological property:
\begin{itemize}
\item \emph{distance between two points:} Take \(X=(0,1)\) and \(Y=(0,2)\),
both equipped with the standard Euclidean metric \(d\). Then, the function
\(f:X\to Y\) defined by \(f(x)=2x\) can be shown to be a homeomorphism.
However, we have
\[
d(0.25,0.75)=|0.75-0.25|\ne |1.5-0.5|=d(0.5,1.5)=d(f(0.25),f(0.75)).
\]
\end{itemize}
\item We see that a homeomorphism may not preserve the distance. In view of
this, we define a notion related to the preservation of distance. A function
\(f:X\to Y\) is called an \defn{isometry}\footnote{\emph{iso:} ``equal'';
\emph{metry:} ``measure''} if it preserves the metric or distance, i.e.,
\[
d_Y(f(p),f(q))=d_X(p,q)
\]
for any \(p,q\in X\), where \(d_X\) and \(d_Y\) denote the metrics for \(X\)
and \(Y\) respectively. Two metric spaces are said to be \defn{isometric} if
there is an isometry of \(X\) onto \(Y\).

\item The concepts of isometry and homeomorphism are related by the following
result.
\begin{proposition}
\label{prp:surj-iso-hmph}
Let \(f:X\to Y\) be a function. If \(f\) is a surjective isometry, then it is a
homeomorphism.
\end{proposition}
\begin{pf}
Firstly, we prove the injectivity of \(f\). Suppose that
\(f(x_1)=f(x_2)\) for some \(x_1,x_2\in X\). Then, we have
\[
d_X(x_1,x_2)=d_Y(f(x_1),f(x_2))=0,
\]
which implies that \(x_1=x_2\), establishing the injectivity. Together with the
surjectivity of \(f\), we know that \(f\) is bijective, thus \(f^{-1}\) exists.

Next, we will prove that \(f\) is continuous. Fix any \(x\in X\) and any
\(\varepsilon>0\). Consider any \(z\in B_X(x,\varepsilon)\). Then, we have
\[
d_Y(f(z),f(x))=d_X(z,x)<\varepsilon,
\]
thus \(f(z)\in B_{Y}(f(x),\varepsilon)\). Since \(z\) is arbitrary, we have
\[
f(B_X(x,\delta))\subseteq B_Y(f(x),\varepsilon),
\]
by choosing \(\delta=\varepsilon\).  This means that \(f\) is continuous.

Finally, we will show that \(f^{-1}\) is continuous. Note that
\[
d_Y(y_1,y_2)=d_Y(f(f^{-1}(y_1)),f(f^{-1}(y_2)))=d_X(f^{-1}(y_1),f^{-1}(y_2))
\]
for any \(y_1,y_2\in Y\), so \(f^{-1}:Y\to X\) is also an isometry. Thus, by
replacing ``\(f\)'' by ``\(f^{-1}\)'' in the argument above, we have, for any
\(y\in Y\) and any \(\varepsilon>0\),
\[
f^{-1}(B_Y(y,\delta))\subseteq B_X(f^{-1}(y),\varepsilon)
\]
where \(\delta=\varepsilon\), establishing the continuity of \(f^{-1}\).
\end{pf}
\end{enumerate}

